!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?exports.JQSPA=e(require("jquery")):t.JQSPA=e(t.jQuery)}(this,function(t){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var o=[],n=t.length;e=e||0;try{o=[].slice.call(t,e)}catch(r){for(var i=e;i<n;i++)o[i]=t[i]}return o}function r(t,e){if("string"!=typeof t)return t;if(0===(t=u.default.trim(t)).length)return{};for(var o,n,i,r,s={},a=t.split(e||"&"),h=0,l=a.length;h<l;h++){o=a[h].split("="),n=decodeURIComponent(o[0]);try{i=decodeURIComponent(o[1])}catch(t){i=o[1]||""}(r=n.match(/^(\w+)\[\]$/))&&r[1]?(s[r[1]]=s[r[1]]||[],s[r[1]].push(i)):s[n]=i}return s}function s(t){if(!(this instanceof s))return new s(t);this._routes=[],this._pathRoot="/",this._mode="hash",this._componentRoot="/",this._jsRoot="/",this._jsVersion="",this._isDebug=!1,this._config(t)}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.Router=s;var h=o(1),u=n(h),l=o(2),c=n(l),f=/\/\.\//g,d=/\/[^/]+\/\.\.\//,p=/([^:]|^)\/\//g;s.prototype={constructor:s,_config:function(t){return t=t||{},this._mode=t.mode&&"history"===t.mode&&history.pushState?"history":"hash",this._pathRoot=t.pathRoot?"/"+this._clearSlashes(t.pathRoot):"/",this._componentRoot=t.componentRoot?"/"+this._clearSlashes(t.componentRoot):"/",this._jsRoot=t.jsRoot?"/"+this._clearSlashes(t.jsRoot):"/",this._jsVersion=t.jsVersion||"",this._isDebug=t.isDebug||!1,this._loading=t.loading||function(){},this._loaded=t.loaded||function(){},this._unload=t.unload||function(){},this},getCurPath:function(){var t="",e=location;if("history"===this._mode)t=this._clearSlashes(decodeURI(e.pathname+e.search)),t="/"!=this._pathRoot?t.replace(this._pathRoot,""):t;else{var o=e.href.match(/#(.*)$/);t=o?"/"!=this._pathRoot?o[1].replace(this._pathRoot,""):o[1]:""}return this._clearSlashes(t)},_clearSlashes:function(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")},getPathConfig:function(t){var e={},o=this.indexOf(t);return o>-1&&(e=this._routes[o]),e},indexOf:function(t){for(var e,o=0;this._routes.length,e=this._routes[o];o++)if(this.isPathEqual(e.path,t)||e.path.exec&&e.path.exec(t))return o;return-1},exist:function(t){return this.indexOf(t)>-1},add:function(t){if(!this.exist(t.path))return this._routes.push({path:t.path||"",js:t.js||"",title:t.title||"",component:t.component,loading:t.loading,loaded:t.loaded,unload:t.unload}),this},remove:function(t){var e=this.indexOf(t);return e>-1&&this._routes.splice(e,1),this},reset:function(){return this._routes=[],this._mode="hash",this._componentRoot="/",this._pathRoot="/",this._jsRoot="/",this._jsVersion="",this._isDebug=!1,this._loading=function(){},this._loaded=function(){},this._unload=function(){},this._handleBeforeJumpTo=null,this},loading:function(t){return this._loading=t,this},loaded:function(t){return this._loaded=t,this},unload:function(t){return this._unload=t,this},isPathEqual:function(t,e){var o=!1,n=void 0===t?"undefined":a(t),i=void 0===e?"undefined":a(e),r=(0,c.default)("^"+this._pathRoot,"^");return n===i&&("object"===n?o=t.toString()===e.toString():(t=t.replace(r,"").replace(/\?.*$/,""),e=e.replace(r,"").replace(/\?.*$/,""),o=this._clearSlashes(t)===this._clearSlashes(e))),o},_loadScript:function(t,e){var o=document.createElement("script");o.type="text/javascript",o.onload=o.onerror=function(n){o.onload=o.onerror=null,o=null,e&&e("error"===n.type?"fail load js: "+t:"")},o.src=t,this.$container[0].appendChild(o)},_resolve:function(t){for(t=t.replace(p,"$1/"),t=t.replace(f,"/");t.match(d);)t=t.replace(d,"/");return t},_join:function(){for(var t=arguments[0],e=i(arguments,1),o=0,n=e.length;o<n;o++)t=t+"/"+this._clearSlashes(e[o]);return t=t.replace(p,"$1/")},getQuery:function(t){var e=this.getCurPath(),o=e.split("?")[1]||"";return t?r(o):o},onlyPath:function(t){return this._onlyChangeHash=!0,t=this._join(this._pathRoot,t||""),location.hash="#"+t,this},load:function(t){if(this._onlyChangeHash)return void(this._onlyChangeHash=!1);t=t||this.getCurPath();for(var e=this,o=this.$container,n=0;n<this._routes.length;n++){var i=this._routes[n],r=null;if(r="string"==typeof i.path?e.isPathEqual(t,i.path)?[]:null:t.match(i.path)){var s=this._join(this._componentRoot,i.component),a=i.js,h=this._jsVersion,l=this._isDebug;a&&(a="/"!==this._jsRoot?this._join(this._jsRoot,a):this._resolve(this._join(s.replace(/\/[^\/]*$/,"/"),a)),h=l?+new Date:h,a+=h?"?v="+h:"");var c=function(t){t=t||"success",i.loaded&&i.loaded.call(e,r,t),e._loaded.call(e,r,t)};return i.loading&&i.loading.call(this,r),this._loading.call(this,r),u.default.ajax({url:s,complete:function(t,n){200===t.status?(o.html(t.responseText),document.title=i.title,a&&"/"!==a?e._loadScript(a,c):c()):c("fail load page: "+s)}}),this}}return this},start:function(t,e){e||(e=t);var o=this,n=location.hostname;return o.$container=(0,u.default)(t),o.$wrapper=(0,u.default)(e),o.$wrapper.on("click","a",function(t){var e=t.target;e.href&&e.hostname===n&&(t.preventDefault(),o.jumpTo(e.getAttribute("href"),(0,u.default)(e).data("page")))}),(0,u.default)(window).on("load",o.load.bind(this,"")),"history"===this._mode?(0,u.default)(window).on("popstate",this.load.bind(this,"")):(0,u.default)(window).on("hashchange",this.load.bind(this,"")),this},_isCurHostname:function(t){var e=document.createElement("a");return e.href=t,e.hostname===location.hostname},_handleBeforeJumpTo:function(){var t=(0,u.default)("body")[0],e=i(t.children),o=this.$wrapper[0];e.filter(function(t){return t!==o}).map(function(e){t.removeChild(e)})},beforeJumpTo:function(t){t&&(this._handleBeforeJumpTo=t),t=t||this._handleBeforeJumpTo;var e=this.getPathConfig(this.getCurPath()),o=t&&t.call(this,e),n=void 0===o||o;return void 0===t&&this.$wrapper&&this._handleBeforeJumpTo(),e.unload&&(o=e.unload.call(this,e),n&&(n=void 0===o||o)),o=this._unload.call(this,e),n&&(n=void 0===o||o),n},jumpTo:function(t,e){if(this.beforeJumpTo())return e&&(location.href=t),/^http(s)?:\/\//.test(t)&&!this._isCurHostname(t)?(location.href=t,this):(t=this._join(this._pathRoot,t||""),"history"===this._mode?(history.pushState(null,null,t),this.load(t)):location.hash="#"+t,this)},refresh:function(){return this.load(),this},routes:function(t){return this._routes=t,this}}},function(e,o){e.exports=t},function(t,e,o){!function(e,o){t.exports=o()}(0,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,o){"string"==typeof e&&/[a-zA-Z]+/.test(e)&&(o=e,e=null),e=e?[].concat(e):[];var n=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"];e.length>0&&(n=n.filter(function(t){return-1===e.indexOf(t)}));var i=new RegExp("[\\"+n.join("\\")+"]","g");return t=t.replace(i,"\\$&"),new RegExp(t,o||"")}}])})}])});